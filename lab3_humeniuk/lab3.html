<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Лабораторна №3 (варіант 2) — всі завдання</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.5; }
    section { margin-bottom: 28px; }
    label { display: inline-block; margin: 6px 0; }
    input[type="number"], textarea { font-size: 1rem; padding: 6px; }
    .keyboard button { margin: 3px 2px; padding: 6px 8px; font-size: 0.95rem; }
    #display { width: 100%; height: 60px; margin-bottom: 8px; font-size: 1rem; }
    #gallery img { max-width: 100%; max-height: 320px; display: block; margin-bottom: 10px; }
    .small { font-size: 0.9rem; color: #333; }
    button { cursor: pointer; }
  </style>
</head>
<body>

  <h1>Лабораторна робота №3 — Варіант 2 (все в одному файлі)</h1>

  <section>
    <h2>Завдання 1. Площа трикутника</h2>
    <label>Основа (a):
      <input type="number" id="base" oninput="calcTriangle()" step="any" min="0">
    </label>
    <br>
    <label>Висота (h):
      <input type="number" id="height" oninput="calcTriangle()" step="any" min="0">
    </label>
    <p>Площа: <strong id="area" class="small"></strong></p>
  </section>

  <section>
    <h2>Завдання 2–3. Екранна клавіатура (UA / EN)</h2>
    <textarea id="display" placeholder="Тут відображається введений текст..." readonly></textarea><br>
    <div id="keyboard" class="keyboard" aria-label="екранна клавіатура"></div>
    <div style="margin-top:8px;">
      <button onclick="clearField()">Очистити поле</button>
      <button onclick="toggleLang()">Alt+Shift (перемкнути UA/EN)</button>
    </div>
  </section>

  <section>
    <h2>Завдання 4. Галерея зображень</h2>
    <div id="gallery">
      <img id="image" src="" alt="Gallery image">
    </div>
    <button onclick="prevImage()">Назад</button>
    <button onclick="nextImage()">Вперед</button>
  </section>

  <section>
    <h2>Завдання 5. Арифметичні завдання (5 питань)</h2>
    <p id="task" class="small"></p>
    <input type="number" id="answer" step="any">
    <button onclick="check()">Перевірити</button>
    <button onclick="nextTask()">Наступне завдання</button>
    <p id="result" class="small"></p>
    <p id="score" class="small"></p>
  </section>

  <section>
    <h2>Завдання 6. Дерево (розгортання/згортання)</h2>
    <ul>
      <li><a href="#" onclick="toggleList(event,'fruits')">fruits</a>
        <ul id="fruits">
          <li>apple</li>
          <li>pineapple</li>
          <li>appricot</li>
          <li>pear</li>
          <li>lemon</li>
        </ul>
      </li>
      <li><a href="#" onclick="toggleList(event,'vegetables')">vegetables</a>
        <ul id="vegetables">
          <li>potatoes</li>
          <li>beetroot</li>
          <li>carrots</li>
          <li>pear</li>
        </ul>
      </li>
    </ul>
  </section>

<script>

function calcTriangle() {
  const a = parseFloat(document.getElementById("base").value);
  const h = parseFloat(document.getElementById("height").value);
  const out = document.getElementById("area");
  if (!isFinite(a) || !isFinite(h) || a <= 0 || h <= 0) {
    out.textContent = "";
    return;
  }
  const S = 0.5 * a * h;
  out.textContent = S % 1 === 0 ? S.toString() : S.toFixed(2);
}

const ua = ["а","б","в","г","ґ","д","е","є","ж","з","и","і","ї","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ь","ю","я"," "];
const en = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"," "];
const digits = ["0","1","2","3","4","5","6","7","8","9"];
let lang = "ua";

function buildKeyboard(arr) {
  let html = "";
  digits.forEach(d => html += `<button type="button" onclick="addSymbol('${escapeChar(d)}')">${d}</button>`);
  html += "<br>";
  arr.forEach((ch, i) => {
    if (i % 11 === 0 && i !== 0) html += "<br>";
    html += `<button type="button" onclick="addSymbol('${escapeChar(ch)}')">${ch}</button>`;
  });
  document.getElementById("keyboard").innerHTML = html;
}
function escapeChar(s) {
  return s.replace(/'/g,"\\'").replace(/\n/g,"\\n");
}
function addSymbol(ch) {
  const area = document.getElementById("display");
  area.value += ch;
}
function clearField() {
  document.getElementById("display").value = "";
}
function toggleLang() {
  lang = (lang === "ua") ? "en" : "ua";
  buildKeyboard(lang === "ua" ? ua : en);
}
buildKeyboard(ua);

const images = [
  "1.jpg",
  "2.jpg",
  "3.jpg",
  "4.jpg"
];
let imgIndex = 0;
document.getElementById("image").src = images[imgIndex];
function nextImage() {
  imgIndex = (imgIndex + 1) % images.length;
  document.getElementById("image").src = images[imgIndex];
}
function prevImage() {
  imgIndex = (imgIndex - 1 + images.length) % images.length;
  document.getElementById("image").src = images[imgIndex];
}

let totalCount = 0, correctCount = 0;
let currentAnswer = null;
let questionsAsked = 0;
const MAX_QUESTIONS = 5;

function generateTask() {
  const a = Math.floor(Math.random() * 10);
  let b = Math.floor(Math.random() * 10);
  const ops = ["+","-","*","/"];
  let op = ops[Math.floor(Math.random() * ops.length)];
  if (op === "/" && b === 0) b = 1;
  let expression = `${a} ${op} ${b}`;
  let result = eval(expression);
  if (op === "/") result = a / b;
  currentAnswer = result;
  document.getElementById("task").textContent = `${a} ${op} ${b} = ?`;
  document.getElementById("answer").value = "";
  document.getElementById("result").textContent = "";
}
function check() {
  const ansStr = document.getElementById("answer").value;
  if (ansStr === "") return;
  const ans = parseFloat(ansStr);
  totalCount++;
  questionsAsked++;
  const isCorrect = Math.abs(ans - currentAnswer) < 1e-6;
  if (isCorrect) {
    correctCount++;
    document.getElementById("result").textContent = "Правильно";
  } else {
    const show = (currentAnswer % 1 === 0) ? currentAnswer : currentAnswer.toFixed(3);
    document.getElementById("result").textContent = `Помилка, правильна відповідь «${show}»`;
  }
  document.getElementById("score").textContent = `Рахунок: ${correctCount} з ${totalCount}`;
  if (questionsAsked >= MAX_QUESTIONS) {
    document.getElementById("task").textContent = "Завдання завершено. Більше питань немає.";
  }
}
function nextTask() {
  if (questionsAsked >= MAX_QUESTIONS) {
    alert("Вже виконано 5 завдань.");
    return;
  }
  generateTask();
}
generateTask();

function toggleList(event, id) {
  event.preventDefault();
  const el = document.getElementById(id);
  if (!el) return;
  el.style.display = (el.style.display === "none") ? "block" : "none";
}
</script>

</body>
</html>